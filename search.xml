<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[DB2存储过程备份]]></title>
    <url>%2Farticles%2F55299%2F</url>
    <content type="text"><![CDATA[基于Windows系统的db2自动化存储过程备份，每天一次，这样再也不用担心存储过程修改之后不能复原的问题了。主要使用到了routine这个命令。 DB2 存储过程 自动备份 项目的数据是基于DB2存储过程进行计算的，所以存储过程的修改、增加、删除是必须操作，为了防止复原进行自动化定时备份，主要分为2部分： 生成备份SQL 123select &apos;db2 get routine into &quot;D:\db_backup_procdures\20210507\&apos;||procname||&apos;.sar&quot; from procedure &apos;||procnamefrom SYSCAT.PROCEDURESwhere procschema = &apos;PAS&apos;; 其中，【D:\db_backup_procdures\20210507\】为存储过程存放的路径，需要提前建立好（目前为手动备份模式）；【PAS】为SCHEMA。执行完毕后，会生成对应schema所有的存储过程存储SQL语句。 生成文件 将上一步生成的SQL复制到一个.bat文件，在第一行填写db2连接数据库语句，大致内容：123456db2 connect to mzlpas user pas using pasdb2 get routine into &quot;D:\db_backup_procdures\20210507\SP_APP_LOAD_CDSJY.sar&quot; from procedure SP_APP_LOAD_CDSJYdb2 get routine into &quot;D:\db_backup_procdures\20210507\SP_APP_LOAD_CKZH.sar&quot; from procedure SP_APP_LOAD_CKZHdb2 get routine into &quot;D:\db_backup_procdures\20210507\SP_APP_LOAD_DKZH.sar&quot; from procedure SP_APP_LOAD_DKZH... 把脚本放到db2cmd中进行执行，完成存储过程备份。 自动化备份脚本完成中，未完待续。。。。。。]]></content>
      <categories>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>DB2</tag>
        <tag>存储过程</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DB2基础学习之常用命令]]></title>
    <url>%2Farticles%2F8747%2F</url>
    <content type="text"><![CDATA[工作环境的原因，第一次实际上使用到了DB2这个数据库，记录一下学习的要点与过程，都是一些比较基础的命令。 DB2 命令 基本操作 cmd 在系统cmd中执行的命令。12345# 普通用户db2cmd# 管理员cmd，有权限执行：db2start，db2stopdb2cmdadmin 创建数据库 123456# SAMPLE数据库db2sampldb2sampl -force# 标准数据库创建db2 create db TEST alias TEST using codeset gbk territory cn collate using system PAGESIZE 8 K 删除数据库 1db2 drop db XXXX 查看数据库列表 12345# 数据库db2 list db directory# 节点db2 list node directory 数据库连接 123456789# 连接db2 connect to XXXX user 用户名 using 密码# 断开（2种方式）db2 connect resetdb2 terminate# 断开所有db2 force application all 数据库添加schema connect数据库状态123456# 创建db2 CREATE SCHEMA XXXX# 设置db2 SET SCHEMA XXXX# 删除db2 DROP SCHEMA XXXX RESTRICT 授权 connect数据库状态授权在这里说2种，都是亲身实践 代码方式 语法糖：1db2 grant 权限 on database to user XXXX 注意：sql语句中的database是固定写法，不是数据库名称。 dbadm：DBADM 用户对一个数据库有几乎完全的控制能力。DBADM 用户不能执行某些维护或管理任务 CREATETAB：用户可以在数据库中创建表。 BINDADD：用户可以使用 BIND 命令在数据库中创建包。 CONNECT：用户可以连接数据库。 CREATE_NOT_FENCED：用户可以创建 unfenced 用户定义函数(UDF)。 IMPLICIT_SCHEMA：用户可以在数据库中隐式地创建模式，而不需要使用 CREATE SCHEMA 命令。 LOAD：用户可以将数据装载进表中。 QUIESCE_CONNECT：用户可以访问处于静默(quiesced)状态的数据库。 CREATE_EXTERNAL_ROUTINE：用户可以创建供应用程序和数据库的其他用户使用的过程。 secadm：安全性管理员 可视化操作方式 打开DB2的控制中心 点击要进行授权的数据库 找到用户和组对象-&gt;数据库用户 双击要进行授权的用户 勾选权限，确定 缓冲池 connect数据库连接状态12345678# 创建 XXXX为名称db2 CREATE BUFFERPOOL XXXX IMMEDIATE SIZE 250 AUTOMATIC PAGESIZE 8 K# 查看db2 select * from SYSCAT.BUFFERPOOLS# 删除db2 DROP BUFFERPOOL XXXX 数据库参数配置 12345# 查看db2 get db cfg# 更新db2 &quot;UPDATE DB CFG USING KEY VALUE&quot; 在更新的语法糖上，key为DB2数据库参数，value为参数值。 高级操作 表空间 表空间类别： 系统表空间（SYSCATSPACE）系统表空间又称为系统编目表空间，DB2系统编目表是DB2数据库保存所有DB2对象元数据的地方。 系统工具表空间（SYSTOOLSPACE）系统工具表空间是供DB2管理工具和SQL管理例程使用的特定表空。 用户表空间（USERSPACE）用户表空间也是数据库创建时自动创建的，表空间名称为USERSPACE1数据库中用户表默认存放于这个表空间中，必须至少有一个用户表空间。 临时表空间（TEMPSPACE）数据库管理器使用临时表空间在执行SQL操作时存储临时数据，例如排序，表重组，索引创建以及表链接等操作所产生的中间表都由临时表空间存储，数据库必须至少有一个临时表空间，也可以有多个。DB2支持系统临时表空间和用户临时表空间两种类型，系统临时表空间必须存在，用户临时表空间可以有0个或多个。 常规表空间常规表空间根据容量将表空间划分为常规表空间和大型表空间。 表空间管理类型： 系统管理表空间（SMS，System-Managed Space）数据存储空间完全由操作系统管理；SMS表空间的大小是可以动态增加的。 数据库管理表空间（DMS，Database-Managed Space）DMS表空间由数据库管理系统（DBMS）自己管理控制；这些容器的空间都是预先分配的且不允许修改大小的。 DMS自动存储表空间（Automatic Storage DMS）它是DMS存储的另外一种处理方法。DMS需要很多的维护操作，而自动存储器则是作为一种简化的空间管理手段， 12345678910111213141516171819# 创建db2 create large tablespace 表空间名 pagesize 页大小 managed by database using(容器类型 路径 大小) bufferpool 缓冲池名# 示例db2 CREATE LARGE TABLESPACE TBS_PAS PAGESIZE 16 K MANAGED BY DATABASE USING ( FILE &apos;/home/TBS_PAS01&apos; 1000M) BUFFERPOOL IBMDEFAULTBP# 删除db2 drop tablespace 表空间名# 增加表空间容器db2 ALTER TABLESPACE TBS_PAS add (FILE &apos;/home/TBS_PAS02&apos; 1000)# 增加容器会涉及到表空间容器的重新平衡，可使用命令db2 list utilities [show detail]# 更改表空间容器db2 ALTER TABLESPACE TBS_PAS resize (FILE &apos;/home/TBS_PAS02&apos; 1000M)# 删除表空间容器db2 ALTER TABLESPACE TBS_PAS drop (FILE &apos;/home/TBS_PAS02&apos;) 修改用户密码（控制台） 密码与系统用户保持一致，也可以通过更改用户密码来更改数据库用户密码12db2 connect to neu user db2admin using db2admindb2 connect to neu user db2admin using db2admin new 1 confirm 1 node节点操作 个人认为，node主要用于集群，如果是单节点，貌似没啥用1234567增加结点编目：db2 catalog tcpip node 结点名字 remote 结点所在ip地址 server 服务端口查看结点编目：db2 list node directory删除结点编目：db2 uncatalog node 结点别名增加数据库编目：db2 catalog db 远程数据库名字 as 数据库别名 at node 结点名字查看数据库编目：db2 list db directory删除数据库编目：db2 uncatalog db 数据库别名 拓展 命令编辑器 1db2ce 控制中心 1db2cc 配置助手 1db2ca 查看db2参数 1db2 list command options 坑 1.节点名称不能包含下划线 学习参考授权：http://blog.sina.com.cn/s/blog_626e70700102uxu0.htmlDB2删除schema：DB2删除schema表空间：http://macsishu.com/db23000/db23400node节点操作：http://blog.sina.com.cn/s/blog_4d887acf0102wydv.html]]></content>
  </entry>
  <entry>
    <title><![CDATA[大学之证书那点事]]></title>
    <url>%2Farticles%2F22143%2F</url>
    <content type="text"><![CDATA[回顾一下大学4年得到的证书 CET CET-4准考证 时间图片2011-12 CET-4准考证 时间图片2011-12 CET-6准考证 时间图片2012-12 NCRE NCRE-3数据库 时间图片2011-09 研究生 准考证 时间图片2013-01 成绩 时间图片2013-01 GIS GIS工程师 时间图片2012-11 作品 时间图片2010-12 表彰 校优实习生 时间图片2013-05 奖学金 时间图片2013-06 其他 普通话 时间图片 2012-06]]></content>
      <categories>
        <category>大学</category>
      </categories>
      <tags>
        <tag>证书</tag>
        <tag>回忆录</tag>
      </tags>
  </entry>
</search>
